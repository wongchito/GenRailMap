<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Generator</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="mdl/material.min.css">
    <script src="mdl/material.min.js"></script>
    <link rel="stylesheet" href="mdl/icons.css">

    <!-- <link rel="stylesheet" href="getmdl-select/getmdl-select.min.css">
    <script defer src="getmdl-select/getmdl-select.min.js"></script> -->

    <script src="gen_rail_map.js"></script>
    <script src="load_params.js"></script>
    <script src="get_params.js"></script>
    <script src="layout.js"></script>
    <script src="styling.js"></script>
    <script src="colours.js"></script>
    <script src="params.js"></script>
    <script src="fontlist.js"></script>
    <style>
        .test:after {
            transition-duration:.2s;
            transition-timing-function:cubic-bezier(.4,0,.2,1);
        }

        .mdl-layout__drawer {
            width: 350px;
            -webkit-transform:translateX(-360px);
            transform:translateX(-360px);
        }

        .mdl-layout--fixed-drawer.is-upgraded:not(.is-small-screen)>.mdl-layout__header {
            margin-left: 350px;
            width:calc(100% - 350px);
        }

        .mdl-layout--fixed-drawer>.mdl-layout__content{margin-left:350px}
 
        .mdl-layout__container.has-scrolling-header .mdl-layout__content{overflow:visible}@media screen and (max-width:1024px){.mdl-layout--fixed-drawer>.mdl-layout__content{margin-left:0}.mdl-layout__container.has-scrolling-header .mdl-layout__content{overflow-y:auto;overflow-x:hidden}}
    </style>
</head>

<body onload="init()">

<!-- <div class="w3-row"> -->

<div class="mdl-layout mdl-js-layout mdl-layout--fixed-header mdl-layout--fixed-drawer">
<header class="mdl-layout__header">
<div class="mdl-layout__header-row">
    <span class="mdl-layout-title">Rail Map Generator</span>
    <div class="mdl-layout-spacer"></div>
    <div class="mdl-textfield mdl-js-textfield mdl-textfield--expandable mdl-textfield--floating-label mdl-textfield--align-right">
    <label class="mdl-button mdl-js-button mdl-button--icon" for="fixed-header-drawer-exp">
        <i class="material-icons">search</i>
    </label>
    <div class="mdl-textfield__expandable-holder">
        <input class="mdl-textfield__input" type="text" name="sample" id="fixed-header-drawer-exp">
    </div>
    </div>
</div>
</header>
<div class="mdl-layout__drawer">
<span class="mdl-layout-title">Configurations</span>
<nav class="mdl-navigation">

<div class="mdl-grid">
    <button class="mdl-cell mdl-cell--6-col mdl-cell--4-col-tablet mdl-cell--2-col-phone mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--colored" onclick="showConfig('nav_layout')">Layout</button>
    <button class="mdl-cell mdl-cell--6-col mdl-cell--4-col-tablet mdl-cell--2-col-phone mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--colored" onclick="showConfig('nav_design')">Design</button>
    <button class="mdl-cell mdl-cell--6-col mdl-cell--4-col-tablet mdl-cell--2-col-phone mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--colored" onclick="showConfig('nav_font')">Font</button>
    <button class="mdl-cell mdl-cell--6-col mdl-cell--4-col-tablet mdl-cell--2-col-phone mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--colored" onclick="showConfig('nav_station')">Station</button>
    <button class="mdl-cell mdl-cell--6-col mdl-cell--4-col-tablet mdl-cell--2-col-phone mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--colored" onclick="showConfig('nav_template')">Template</button>
    <button class="mdl-cell mdl-cell--6-col mdl-cell--4-col-tablet mdl-cell--2-col-phone mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--colored" onclick="showConfig('nav_save')">Save</button>
</div>
            
<div style="display: none" id="nav_layout">
<div class="mdl-grid">
    <div class="mdl-cell mdl-cell--3-col mdl-cell--2-col-tablet mdl-cell--1-col-phone mdl-cell--middle mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
        <input class="mdl-textfield__input" type="text" value="500" id="svg_width" onchange="setSVGWidth()">
        <label class="mdl-textfield__label" for="svg_width">Width</label>
    </div>
    <div class="mdl-cell mdl-cell--3-col mdl-cell--2-col-tablet mdl-cell--1-col-phone mdl-cell--middle mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
        <input class="mdl-textfield__input" type="text" value="200" id="svg_height" onchange="setSVGHeight()">
        <label class="mdl-textfield__label" for="svg_height">Height</label>
    </div>
    <div class="mdl-cell mdl-cell--6-col mdl-cell--4-col-tablet mdl-cell--2-col-phone mdl-cell--middle mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
        <label class="mdl-switch mdl-js-switch mdl-js-ripple-effect" for="outer_checkbox">
            <input type="checkbox" id="outer_checkbox" class="mdl-switch__input" onchange="showOuter(this)" checked>
            <span class="mdl-switch__label">Border</span>
        </label>
    </div>
    <div class="mdl-cell mdl-cell--3-col mdl-cell--2-col-tablet mdl-cell--1-col-phone mdl-cell--middle mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
        <input class="mdl-textfield__input" type="text" value="10" id="padding_text" onchange="setPadding('text')">
        <label class="mdl-textfield__label" for="padding_text">Padding</label>
    </div>
    <div class="mdl-cell mdl-cell--9-col mdl-cell--6-col-tablet mdl-cell--3-col-phone mdl-cell--middle">
        <input class="mdl-slider mdl-js-slider" id="padding_slider" type="range" min="0" max="50" value="10" tabindex="0" onchange="setPadding('slider')">
    </div>
    <div class="mdl-cell mdl-cell--3-col mdl-cell--2-col-tablet mdl-cell--1-col-phone mdl-cell--middle mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
        <input class="mdl-textfield__input" type="text" value="50" id="y_text" onchange="setY('text')">
        <label class="mdl-textfield__label" for="y_text">y</label>
    </div>
    <div class="mdl-cell mdl-cell--9-col mdl-cell--6-col-tablet mdl-cell--3-col-phone mdl-cell--middle">
        <input class="mdl-slider mdl-js-slider" id="y_slider" type="range" min="0" max="100" value="50" tabindex="0" onchange="setY('slider')">
    </div>
    <div class="mdl-cell mdl-cell--3-col mdl-cell--2-col-tablet mdl-cell--1-col-phone mdl-cell--middle mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
        <input class="mdl-textfield__input" type="text" value="95" id="strip_text" onchange="setStripY('text')">
        <label class="mdl-textfield__label" for="strip_text">Banner</label>
    </div>
    <div class="mdl-cell mdl-cell--9-col mdl-cell--6-col-tablet mdl-cell--3-col-phone mdl-cell--middle">
        <input class="mdl-slider mdl-js-slider" id="strip_slider" type="range" min="80" max="100" value="95" tabindex="0" onchange="setStripY('slider')">
    </div>

    <button class="mdl-button mdl-js-button mdl-button--fab mdl-button--mini-fab mdl-button--colored" onclick="this.parentNode.parentNode.style.display='none'">
        <i class="material-icons">expand_less</i>
    </button>
</div>
</div>

<div style="display: none" id="nav_design">
<div class="mdl-grid">
    <div id="theme">
    <div class="mdl-cell mdl-cell--12-col mdl-cell--8-col-tablet mdl-cell--4-col-phone mdl-cell--middle mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
        <select id="city" class="mdl-textfield__input" onchange="loadLine(this.parentNode.parentNode)">
        </select>
        <label class="mdl-textfield__label" for="city">City</label>
    </div>
    <div class="mdl-cell mdl-cell--6-col mdl-cell--4-col-tablet mdl-cell--2-col-phone mdl-cell--middle mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
        <select id="line" class="mdl-textfield__input" onchange="loadColour(this.parentNode.parentNode)">
        </select>
        <label class="mdl-textfield__label" for="line">Line</label>
    </div>
    <div class="mdl-cell mdl-cell--5-col mdl-cell--3-col-tablet mdl-cell--1-col-phone mdl-cell--middle mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
        <input id="colour" class="mdl-textfield__input" type="color" onchange="notImplement()">
        <label class="mdl-textfield__label" for="colour">Colour</label>
    </div>
    </div>

    <div class="mdl-cell mdl-cell--6-col mdl-cell--4-col-tablet mdl-cell--2-col-phone mdl-cell--middle mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
        <select id="style" class="mdl-textfield__input" onchange="setStyle()">
            <option value="gzmtr">Guangzhou Metro - 广州地铁</option>
            <option value="mtr">MTR - 港鐵</option>
        </select>
        <label class="mdl-textfield__label" for="style">Style</label>
    </div>
    <div class="mdl-cell mdl-cell--2-col mdl-cell--1-col-tablet mdl-cell--1-col-phone mdl-cell--middle mdl-textfield mdl-js-textfield mdl-textfield--floating-label" style="display: none;">
        <input class="mdl-textfield__input" type="text" value="T" id="line_num" onchange="setLineNum()">
        <label class="mdl-textfield__label" for="strip_text">Line</label>
    </div>
    <div class="mdl-cell mdl-cell--4-col mdl-cell--3-col-tablet mdl-cell--1-col-phone mdl-cell--middle mdl-textfield mdl-js-textfield mdl-textfield--floating-label" style="display: none;">
        <select id="auto_num" class="mdl-textfield__input" onchange="setStnNum()">
            <option value="asc">Ascending</option>
            <option value="desc">Descending</option>
        </select>
        <label class="mdl-textfield__label" for="auto_num">Numbering</label>
    </div>
    <div class="mdl-cell mdl-cell--6-col mdl-cell--4-col-tablet mdl-cell--2-col-phone mdl-cell--middle">
        <button class="mdl-button mdl-js-button mdl-button--primary" disabled>
            Direction
        </button>   
    </div>
    <div class="mdl-cell mdl-cell--3-col mdl-cell--2-col-tablet mdl-cell--1-col-phone mdl-cell--middle">
        <button class="mdl-button mdl-js-button mdl-js-ripple-effect" onclick="setDirection(this)" id="direc_l">
            <i class="material-icons">arrow_back</i>
        </button>
    </div>
    <div class="mdl-cell mdl-cell--3-col mdl-cell--2-col-tablet mdl-cell--1-col-phone mdl-cell--middle">
        <button class="mdl-button mdl-js-button mdl-js-ripple-effect" onclick="setDirection(this)" id="direc_r" disabled>
            <i class="material-icons">arrow_forward</i>
        </button>
    </div>


    <button class="mdl-button mdl-js-button mdl-button--fab mdl-button--mini-fab mdl-button--colored" onclick="this.parentNode.parentNode.style.display='none'">
        <i class="material-icons">expand_less</i>
    </button>
</div>
</div>

<div style="display: none" id="nav_font">
<div class="mdl-grid">
    <div class="mdl-cell mdl-cell--3-col mdl-cell--2-col-tablet mdl-cell--1-col-phone mdl-cell--middle">
        <span class="mdl-chip mdl-chip--contact">
            <span class="mdl-chip__contact mdl-color--teal mdl-color-text--white">字</span>
            <span class="mdl-chip__text">HAN</span>
        </span>
    </div>
    <div class="mdl-cell mdl-cell--7-col mdl-cell--5-col-tablet mdl-cell--2-col-phone mdl-cell--middle mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
        <select id="font_zh" class="mdl-textfield__input">
            <option value="na">N/A</option>
        </select>
        <label class="mdl-textfield__label" for="font_zh">Font</label>
    </div>
    <div class="mdl-cell mdl-cell--2-col mdl-cell--1-col-tablet mdl-cell--1-col-phone mdl-cell--middle">
        <label class="mdl-icon-toggle mdl-js-icon-toggle mdl-js-ripple-effect" for="weight_zh">
            <input type="checkbox" id="weight_zh" class="mdl-icon-toggle__input" onchange="setFontWeight('zh')">
            <i class="mdl-icon-toggle__label material-icons">format_bold</i>
        </label>
    </div>

    <div class="mdl-cell mdl-cell--3-col mdl-cell--2-col-tablet mdl-cell--1-col-phone mdl-cell--middle">
        <span class="mdl-chip mdl-chip--contact">
            <span class="mdl-chip__contact mdl-color--teal mdl-color-text--white">A</span>
            <span class="mdl-chip__text">LAT</span>
        </span>
    </div>
    <div class="mdl-cell mdl-cell--7-col mdl-cell--5-col-tablet mdl-cell--2-col-phone mdl-cell--middle mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
        <select id="font_en" class="mdl-textfield__input">
            <option value="na">N/A</option>
        </select>
        <label class="mdl-textfield__label" for="font_en">Font</label>
    </div>
    <div class="mdl-cell mdl-cell--2-col mdl-cell--1-col-tablet mdl-cell--1-col-phone mdl-cell--middle">
        <label class="mdl-icon-toggle mdl-js-icon-toggle mdl-js-ripple-effect" for="weight_en">
            <input type="checkbox" id="weight_en" class="mdl-icon-toggle__input" onchange="setFontWeight('en')">
            <i class="mdl-icon-toggle__label material-icons">format_bold</i>
        </label>
    </div>

    <div class="mdl-cell mdl-cell--3-col mdl-cell--2-col-tablet mdl-cell--1-col-phone mdl-cell--middle mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
        <input class="mdl-textfield__input" type="text" value="15" id="txt_bg_gap_text" onchange="setTxtBGGap('text')">
        <label class="mdl-textfield__label" for="txt_bg_gap_text">Padding</label>
    </div>
    <div class="mdl-cell mdl-cell--6-col mdl-cell--4-col-tablet mdl-cell--2-col-phone mdl-cell--middle">
        <input class="mdl-slider mdl-js-slider" id="txt_bg_gap_slider" type="range" min="0" max="30" value="15" tabindex="0" onchange="setTxtBGGap('slider')">
    </div>
    <div class="mdl-cell mdl-cell--3-col mdl-cell--2-col-tablet mdl-cell--1-col-phone mdl-cell--middle">
        <button class="mdl-button mdl-js-button mdl-button--primary" onclick="flipStnPos()">
            Flip
        </button>   
    </div>

    <button class="mdl-button mdl-js-button mdl-button--fab mdl-button--mini-fab mdl-button--colored" onclick="this.parentNode.parentNode.style.display='none'">
        <i class="material-icons">expand_less</i>
    </button>
</div>
</div>

<div style="display: none" id="nav_station">
<div class="mdl-grid">
        <ul class="w3-ul" id="stn_list">

                <li class="w3-row-padding" id="stn0">
                <div class="w3-col" style="width:10%;">
                    <input type="radio" class="w3-radio" id="current" name="current" onchange="setCurrentStn(this)">
                </div>
                <div class="w3-col" style="width:45%;">
                    <input id="field0" class="w3-input" type="text" onchange="setStnName(this, 0)">
                </div>
                <div class="w3-col" style="width:45%;">
                    <input id="field1" class="w3-input" type="text" onchange="setStnName(this, 1)">
                </div>
                <div class="w3-right">
                    <input id="stn_num" class="w3-input" type="text" value style="display: none;">
                    <input id="change" type="checkbox" class="w3-check" onchange="loadChangeColourSelector(this)">
                    <button class="w3-button" id="add" onclick="addStn(this)">&plus;</button>
                    <button class="w3-button" id="rm" onclick="rmStn(this)">&times;</button>
                </div>
                </li>
                
                </ul>

    <button class="mdl-button mdl-js-button mdl-button--fab mdl-button--mini-fab mdl-button--colored" onclick="this.parentNode.parentNode.style.display='none'">
        <i class="material-icons">expand_less</i>
    </button>
</div>
</div>

<div style="display: none" id="nav_template">
<div class="mdl-grid">
        <select id="template">
                <option value="wrl">West Rail Line - 西鐵綫</option>
                <option value="gz8">Line 8 - 8号线</option>
                <option value="edi24">Edinburgh Lothian Service 24</option>
            </select>
            <button onclick="loadTemplate(document.getElementById('template').value)">Load</button>

    <button class="mdl-button mdl-js-button mdl-button--fab mdl-button--mini-fab mdl-button--colored" onclick="this.parentNode.parentNode.style.display='none'">
        <i class="material-icons">expand_less</i>
    </button>
</div>
</div>

<div style="display: none" id="nav_save">
<div class="mdl-grid">
        <button onclick="save()">Save state</button> Copy the configuration script below and save it!
<br/>
<textarea id="params_string" rows="30" cols="50"></textarea>
<br/>
<button onclick="load()">Load state</button> Refresh this page, paste your configuration script above and load your work!

    <button class="mdl-button mdl-js-button mdl-button--fab mdl-button--mini-fab mdl-button--colored" onclick="this.parentNode.parentNode.style.display='none'">
        <i class="material-icons">expand_less</i>
    </button>
</div>
</div>


</nav>
</div>
<main class="mdl-layout__content">
    <div class="page-content" style="overflow-x:auto;">

<svg 
xmlns="http://www.w3.org/2000/svg"
xmlns:xlink="http://www.w3.org/1999/xlink" 
id="root" width="500" height="200" onload="initSVG()">
    <style type="text/css">
        .LineDiagramHK {fill:none;stroke-width:11}
        .LineDiagramGZ {fill:none;stroke-width:4}
        .LineDiagramPassGZ {stroke-dasharray:4,4;stroke-width:4;fill:none;}
        .LineDiagramChangeHK {fill:none; stroke-width:10}
        .LineDiagramChangeGZ {fill:none; stroke-width:4}
        .Strip {fill:none;stroke-width:20}

        .PassedName {
            fill: #AAAAAA;
        }
        .CurrentName {
            fill: #FFFFFF;
        }
        .FutureName {
            fill: #000000;
        }

        .StnNameEN {
            font-size:11px;
            alignment-baseline:middle;
        }
        .StnNameZH {
            font-size:18px;
            alignment-baseline:central;
        }

        .IntNameEN {
            font-size:7px;
            alignment-baseline:middle;
        }
        .IntNameZH {
            font-size:10px;
            alignment-baseline:central;
        }

        .StnNum{
            font-family: Arial;
            font-size: 14px;
            text-anchor: middle;
            alignment-baseline: central;
        }

        .cpassed {stroke:#AAAAAA}
        .cnone {stroke:none}
        .cunknown {stroke:#999999}

    </style>

    <defs>
        <path id="st" class="StationTick" d="M 2,0 H 7"/>
        <path id="term" class="StationTick" d="M -7,0 H 7"/>
        <g id="stn_hk">
            <circle cx="0" cy="0" r="10.5" fill="#000"/>
            <circle cx="0" cy="0" r="8" fill="#fff"/>
        </g>
        <g id="stn_hk_pass">
            <circle cx="0" cy="0" r="10.5" fill="#AAAAAA"/>
            <circle cx="0" cy="0" r="8" fill="#fff"/>
        </g>
        <path id="stn_gz" stroke-width="2" fill="#fff" d="M 0,9.25 V -9.25 H -9.25 a 9.25,9.25 0 0,0 0,18.5 h 18.5 a 9.25,9.25 0 0,0 0,-18.5 H 0 "/>

        <path id="intline_up" d="M 0,0 v -17" stroke-linecap="round"/>
        <path id="intline_down" d="M 0,0 v 17" stroke-linecap="round"/>
    </defs>

    <g class="LineDiagramHK">
        <path id="line_main" stroke="#F3D03E" d="M 25,100 h 450"/>
    </g>
    
    <g class="LineDiagramHK">
        <path id="line_passed" class="cpassed" d="M 250,100 H 25"/>
    </g>

    <g class="Strip">
        <path id="strip" stroke="#F3D03E" d="M 0,190 H 500"/>
    </g>

    <g class="LineDiagramChangeHK" id="station_ints">
        <use id="stn_int_0" xlink:href="#intline_down" stroke="none" x="25" y="100"/>
        <!-- <use id="stn_int_1" xlink:href="#intline_up" stroke="none" x="250" y="100"/>
        <use id="stn_int_2" xlink:href="#intline_down" stroke="none" x="475" y="100"/> -->
    </g>

    <g id="stations">
        <use xlink:href="#stn_hk" stroke="none" transform="translate(25,100)" id="stn_icon_0"/>
        <!-- <use xlink:href="#int" transform="translate(250,100)" id="stn_icon_1"/>
        <use xlink:href="#int" transform="translate(475,100)" id="stn_icon_2"/> -->
    </g>

    <g id="station_number" style="display:none">
        <g id="stn_num_0" class="FutureName">
            <text x="16" y="100" class="StnNum" id="ln">1</text>
            <text x="34" y="100" class="StnNum" id="stn">01</text>
        </g>
    </g>

    <g>
        <rect id="current_bg" x="0" y="0" width="100" height="20" fill="#000"/>
    </g>

    <g id="station_names">
        <g id="stn_name_0" class="PassedName" transform="translate(25,70)rotate(0)" text-anchor="middle">
            <text id="field0" class="StnNameZH">中環</text>
            <text id="field1" dy="15" class="StnNameEN">Central</text>
        </g>
        <!-- <g id="stn_name_1" class="CurrentName" transform="translate(250,70)rotate(0)" text-anchor="middle">
            <text id="field0" class="StnNameZH">金鐘</text>
            <text id="field1" dy="15" class="StnNameEN">Admiralty</text>
        </g>
        <g id="stn_name_2" class="FutureName" transform="translate(475,70)rotate(0)" text-anchor="middle">
            <text id="field0" class="StnNameZH">荃灣</text>
            <text id="field1" dy="15" class="StnNameEN">Tsuen Wan</text>
        </g> -->
    </g>

    <g id="change_bgs" style="display:none;">
        <rect id="int_bg_0" x="25" y="0" rx="3" ry="3" width="37" height="20" fill="none"/>
    </g>

    <g id="change_names">
        <g id="int_name_0" class="PassedName">
            <text id="field0" x="25" y="0" class="IntNameZH" text-anchor="middle"></text>
            <text id="field1" x="25" y="9" class="IntNameEN" text-anchor="middle"></text>
        </g>
        <!-- <g id="int_name_1" class="FutureName">
            <text id="field0" x="250" y="0" class="IntNameZH" text-anchor="middle"></text>
            <text id="field1" x="250" y="8" class="IntNameEN" text-anchor="middle"></text>
        </g>
        <g id="int_name_2" class="FutureName">
            <text id="field0" x="475" y="0" class="IntNameZH" text-anchor="middle"></text>
            <text id="field1" x="475" y="8" class="IntNameEN" text-anchor="middle"></text>
        </g> -->
    </g>

    <rect id="outer" x="0" y="0" width="500" height="200" fill="none" stroke="black"/>
</svg>

    </div>
</main>
</div>

<script>
function showConfig(nav) {
    var all_nav = ['nav_layout', 'nav_design', 'nav_font', 'nav_station', 'nav_template', 'nav_save'];
    for (i=0; i<all_nav.length; i++) {
        if (all_nav[i] == nav) {
            document.getElementById(all_nav[i]).style.display = 'inline';
        } else {
            document.getElementById(all_nav[i]).style.display = 'none';
        }
    }
}
</script>

</body>
</html>