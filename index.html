<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Generator</title>
    <script src="gen_rail_map.js"></script>
    <script src="load_params.js"></script>
    <script src="get_params.js"></script>
    <script src="layout.js"></script>
    <script src="colours.js"></script>
    <script src="params.js"></script>
    <script src="fontlist.js"></script>
</head>

<body onload="init()">

<div style="display: flex; flex-wrap: nowrap;">
<div>

<!-- <button onclick="test()">TEST FUNCTION</button> -->

<input id="svg_width" type="text" value="500" onchange="setSVGWidth()">width</input>
<input id="svg_height" type="text" value="200" onchange="setSVGHeight()">height</input>

<input id="outer_checkbox" type="checkbox" onchange="showOuter(this)" checked>Show border</input>

<!-- <p>Zoom (%)</p>
<input id="zoom_slider" type="range" value="2" min="1" max="3" step="0.01" onchange="setZoom('slider')"/>
<input id="zoom_text" type="text" value="100" onchange="setZoom('text')"/> -->

<p>Padding (%)</p>
<input id="padding_slider" type="range" value="10" min="0" max="50" onchange="setPadding('slider')"/>
<input id="padding_text" type="text" value="10" onchange="setPadding('text')"/>
<!-- <p id="padding_text">10</p> -->

<p>y position (%)</p>
<input id="y_slider" type="range" value="50" min="0" max="100" onchange="setY('slider')"/>
<input id="y_text" type="text" value="50" onchange="setY('text')"/>

<p>Banner strip y position (%)</p>
<input id="strip_slider" type="range" value="95" min="80" max="100" onchange="setStripY('slider')"/>
<input id="strip_text" type="text" value="95" onchange="setStripY('text')"/>

<p>Colour theme</p>
<div id="theme" style="display:block;">
    <select id="city" onchange="loadLine(this.parentNode)">
    </select>
    <select id="line" onchange="loadColour(this.parentNode)">
    </select>
    <input id="colour" type="color" onchange="notImplement()">
</div>

<!-- <select id="colour_city" onchange="getCity(this)" style="display:none">
    <optgroup label="CHINA - 中國">
        <option value="fs">Foshan - 佛山</option>
        <option value="gz">Guangzhou - 广州</option>
        <option value="sz">Shenzhen - 深圳</option>
    </optgroup>
    <optgroup label="HONG KONG - 香港">
        <option value="hk" selected="selected">Hong Kong - 香港</option>
    </optgroup>
    <optgroup label="UNITED KINGDOM - 英國">
        <option value="london">London - 倫敦</option>
    </optgroup>
</select>

<div id="colour_cities">
    <select id="hk" style="display:none" onchange="setLineColour()">
        <option value="twl">Tsuen Wan Line - 荃灣綫</option>
        <option value="ktl">Kwun Tong Line - 觀塘綫</option>
        <option value="isl">Island Line - 港島綫</option>
        <option value="tkl">Tseung Kwan O Line - 將軍澳綫</option>
        <option value="tcl">Tung Chung Line - 東涌綫</option>
        <option value="drl">Disneyland Resort Line - 迪士尼綫</option>
        <option value="ael">Airport Express - 機場快綫</option>
        <option value="sile">South Island Line - 南港島綫（東段）</option>
        <option value="silw">South Island Line - 南港島綫（西段）</option>
        <option value="ekl">East Kowloon Line - 東九龍綫</option>
        <option value="erl">East Rail Line - 東鐵綫</option>
        <option value="wrl">West Rail Line - 西鐵綫</option>
        <option value="lrl">Light Rail - 輕鐵</option>
    </select>
    
    <select id="gz" style="display:none" onchange="setLineColour()">
        <option value="gz1">Line 1 - 1号线</option>
        <option value="gz2">Line 2 - 2号线</option>
        <option value="gz3">Line 3 - 3号线</option>
        <option value="gz4">Line 4 - 4号线</option>
        <option value="gz5">Line 5 - 5号线</option>
        <option value="gz6">Line 6 - 6号线</option>
        <option value="gz7">Line 7 - 7号线</option>
        <option value="gz8">Line 8 - 8号线</option>
        <option value="gz9">Line 9 - 9号线</option>
        <option value="gz10">Line 10 - 10号线</option>
        <option value="gz11">Line 11 - 11号线</option>
        <option value="gz12">Line 12 - 12号线</option>
        <option value="gz13">Line 13 - 13号线</option>
        <option value="gz14">Line 14 - 14号线</option>
        <option value="gz18">Line 18 - 18号线</option>
        <option value="gz19">Line 19 - 19号线</option>
        <option value="gz21">Line 21 - 21号线</option>
        <option value="gz22">Line 22 - 22号线</option>
        <option value="gf">Guangfo Line - 广佛线</option>
        <option value="gzapm">APM Line - APM线</option>
        <option value="gzthz1">THZ1</option>
    </select>

    <select id="fs" style="display:none" onchange="setLineColour()">
        <option value="gf">Guangfo Line - 广佛线</option>
        <option value="fs2">Line 2 - 2号线</option>
        <option value="fs3">Line 3 - 3号线</option>
        <option value="fs4">Line 4 - 4号线</option>
        <option value="fs6">Line 6 - 6号线</option>
        <option value="fs9">Line 9 - 9号线</option>
        <option value="fs11">Line 11 - 11号线</option>
        <option value="sz13">Line 13 - 13号线</option>
    </select>

    <select id="sz" style="display:none" onchange="setLineColour()">
        <option value="sz1">Line 1 - 1号线</option>
        <option value="sz2">Line 2 - 2号线</option>
        <option value="sz3">Line 3 - 3号线</option>
        <option value="sz4">Line 4 - 4号线</option>
        <option value="sz5">Line 5 - 5号线</option>
        <option value="sz6">Line 6 - 6号线</option>
        <option value="sz7">Line 7 - 7号线</option>
        <option value="sz8">Line 8 - 8号线</option>
        <option value="sz9">Line 9 - 9号线</option>
        <option value="sz10">Line 10 - 10号线</option>
        <option value="sz11">Line 11 - 11号线</option>
        <option value="sz12">Line 12 - 12号线</option>
        <option value="sz13">Line 13 - 13号线</option>
        <option value="sz14">Line 14 - 14号线</option>
        <option value="sz15">Line 15 - 15号线</option>
        <option value="sz16">Line 16 - 16号线</option>
        <option value="sz20">Line 20 - 20号线</option>
    </select>
    
    <select id="london" style="display:none" onchange="setLineColour()">
        <option value="ctl">Central Line</option>
    </select>
</div> -->

<p>Style</p>
<select id="style" onchange="setStyle(this)">
    <option value="gzmtr">Guangzhou Metro - 广州地铁</option>
    <option value="mtr">MTR - 港鐵</option>
</select>

<p>Direction</p>
<input id="direc_l" type="radio" name="direction" value="left" onchange="setDirection(this)">left &lt;--</input>
<input id="direc_r" type="radio" name="direction" value="right" onchange="setDirection(this)" checked>right --&gt;</input>

<p>Text background gap</p>
<input id="txt_bg_gap_slider" type="range" value="15" min="0" max="30" onchange="setTxtBGGap('slider')"/>
<input id="txt_bg_gap_text" type="text" value="15" onchange="setTxtBGGap('text')"/>

<button onclick="flipStnPos()">Flip</button>

<p>Station list</p>
<div id="stn_list">
    <div id="stn0">
        <input type="radio" name="current" onchange="setCurrentStn(this)">
        <input type="text" onchange="setStnName(this, 0)">
        <input type="text" onchange="setStnName(this, 1)">
        <input type="checkbox" onchange="wrapStnName(this)">Wrap</input>
        <button onclick="addStn(this)">+</button>
        <button onclick="rmStn(this)">-</button>
        <input type="checkbox" onchange="loadChangeColourSelector(this)">
    </div>
    <!-- <div id="stn1">
        <input type="radio" name="current" onchange="setCurrentStn(this)" checked>
        <input type="text" onchange="setStnName(this, 0)">
        <input type="text" onchange="setStnName(this, 1)">
        <input type="checkbox" onchange="wrapStnName(this)">Wrap</input>
        <button onclick="addStn(this)">+</button>
        <button onclick="rmStn(this)">-</button>
        <input type="checkbox" onchange="loadChangeColourSelector(this)">
    </div>
    <div id="stn2">
        <input type="radio" name="current" onchange="setCurrentStn(this)">
        <input type="text" onchange="setStnName(this, 0)">
        <input type="text" onchange="setStnName(this, 1)">
        <input type="checkbox" onchange="wrapStnName(this)">Wrap</input>
        <button onclick="addStn(this)">+</button>
        <button onclick="rmStn(this)">-</button>
        <input type="checkbox" onchange="loadChangeColourSelector(this)">
    </div> -->
</div>

<p>Load templates</p>
<select id="template">
    <option value="wrl">West Rail Line - 西鐵綫</option>
    <option value="gz8">Line 8 - 8号线</option>
    <option value="edi24">Edinburgh Lothian Service 24</option>
</select>
<button onclick="loadTemplate(document.getElementById('template').value)">Load</button>

</div>
<div>

<svg 
xmlns="http://www.w3.org/2000/svg"
xmlns:xlink="http://www.w3.org/1999/xlink" 
id="root" width="500" height="200" onload="initSVG()">
    <style type="text/css">
        .LineDiagram {fill:none;stroke-width:11}
        .LineDiagramChange {fill:none; stroke-width:10}
        .Strip {fill:none;stroke-width:20}

        .PassedName {
            fill: #AAAAAA;
        }
        .CurrentName {
            fill: #FFFFFF;
        }
        .FutureName {
            fill: #000000;
        }

        .StnNameEN {
            font-weight:bold;
            font-size:11px;
            alignment-baseline:middle;
        }
        .StnNameZH {
            font-weight:bold;
            font-size:18px;
            alignment-baseline:central;
        }

        .IntNameEN {
            font-weight:bold;
            font-size:6px;
            alignment-baseline:middle;
        }
        .IntNameZH {
            font-weight:bold;
            font-size:10px;
            alignment-baseline:central;
        }

        .cpassed {stroke:#AAAAAA}
        .cnone {stroke:none}
        .cunknown {stroke:#999999}

    </style>

    <defs>
        <path id="st" class="StationTick" d="M 2,0 H 7"/>
        <path id="term" class="StationTick" d="M -7,0 H 7"/>
        <g id="int">
            <circle cx="0" cy="0" r="10.5" fill="#000"/>
            <circle cx="0" cy="0" r="8" fill="#fff"/>
        </g>
        <g id="passedint">
            <circle cx="0" cy="0" r="10.5" fill="#AAAAAA"/>
            <circle cx="0" cy="0" r="8" fill="#fff"/>
        </g>
        <path id="intline_up" d="M 0,0 v -17" stroke-linecap="round"/>
        <path id="intline_down" d="M 0,0 v 17" stroke-linecap="round"/>
    </defs>

    <g class="LineDiagram">
        <path id="line_main" stroke="#F3D03E" d="M 25,100 h 450"/>
        <path id="line_passed" class="cpassed" d="M 250,100 H 25"/>
    </g>

    <g class="Strip">
        <path id="strip" stroke="#F3D03E" d="M 0,190 H 500"/>
    </g>

    <g class="LineDiagramChange" id="station_ints">
        <use id="stn_int_0" xlink:href="#intline_down" stroke="none" x="25" y="100"/>
        <!-- <use id="stn_int_1" xlink:href="#intline_up" stroke="none" x="250" y="100"/>
        <use id="stn_int_2" xlink:href="#intline_down" stroke="none" x="475" y="100"/> -->
    </g>

    <g id="stations">
        <use xlink:href="#int" transform="translate(25,100)" id="stn_icon_0"/>
        <!-- <use xlink:href="#int" transform="translate(250,100)" id="stn_icon_1"/>
        <use xlink:href="#int" transform="translate(475,100)" id="stn_icon_2"/> -->
    </g>

    <g>
        <rect id="current_bg" x="0" y="0" width="100" height="20" fill="#000"/>
    </g>

    <g id="station_names">
        <g id="stn_name_0" class="PassedName" transform="translate(25,70)rotate(0)" text-anchor="middle">
            <text id="field0" class="StnNameZH">中環</text>
            <text id="field1" dy="15" class="StnNameEN">Central</text>
        </g>
        <!-- <g id="stn_name_1" class="CurrentName" transform="translate(250,70)rotate(0)" text-anchor="middle">
            <text id="field0" class="StnNameZH">金鐘</text>
            <text id="field1" dy="15" class="StnNameEN">Admiralty</text>
        </g>
        <g id="stn_name_2" class="FutureName" transform="translate(475,70)rotate(0)" text-anchor="middle">
            <text id="field0" class="StnNameZH">荃灣</text>
            <text id="field1" dy="15" class="StnNameEN">Tsuen Wan</text>
        </g> -->
    </g>

    <g id="change_names">
        <g id="int_name_0" class="PassedName">
            <text id="field0" x="25" y="0" class="IntNameZH" text-anchor="middle"></text>
            <text id="field1" x="25" y="8" class="IntNameEN" text-anchor="middle"></text>
        </g>
        <!-- <g id="int_name_1" class="FutureName">
            <text id="field0" x="250" y="0" class="IntNameZH" text-anchor="middle"></text>
            <text id="field1" x="250" y="8" class="IntNameEN" text-anchor="middle"></text>
        </g>
        <g id="int_name_2" class="FutureName">
            <text id="field0" x="475" y="0" class="IntNameZH" text-anchor="middle"></text>
            <text id="field1" x="475" y="8" class="IntNameEN" text-anchor="middle"></text>
        </g> -->
    </g>

    <rect id="outer" x="0" y="0" width="500" height="200" fill="none" stroke="black"/>
</svg>

<br/>
<button onclick="save()">Save state</button> Copy the configuration script below and save it!
<br/>
<textarea id="params_string" rows="30" cols="50"></textarea>
<br/>
<button onclick="load()">Load state</button> Refresh this page, paste your configuration script above and load your work!

<br/>
<a href="https://github.com/wongchito/GenRailMap">Improve this page</a>


</div>
</div>


<br/>

</body>
</html>